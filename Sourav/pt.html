<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Emergency Service Directory</title>
  <style>
    :root{
      --bg:#f2fbf5;
      --white:#ffffff;
      --text:#1f2937;
      --muted:#6b7280;
      --primary:#0ea34a;
      --primary-600:#0b8d3f;
      --soft:#e7f6ec;
      --card:#ffffff;
      --border:#e5e7eb;
      --badge:#eef2ff;
      --danger:#ef4444;
      --shadow:0 6px 24px rgba(16,24,40,.06), 0 2px 6px rgba(16,24,40,.04);
      --radius:16px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";color:var(--text);background:var(--bg)}
    a{text-decoration:none;color:inherit}

    /* Navbar */
    .navbar{position:sticky;top:0;z-index:50;background:var(--white);border-bottom:1px solid var(--border)}
    .nav-inner{max-width:1200px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;padding:12px 16px;gap:12px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:700}
    .logo {}
    .logo .name {width:36px;height:36px;border-radius:50%;display:flex;place-items:center;}
    .brand .name{display:flex;flex-direction:column;line-height:1}
    .brand .name small{color:var(--muted);font-weight:500}

    .stats{display:flex;align-items:center;gap:14px}
    .stat{display:flex;align-items:center;gap:8px;padding:6px 10px;border-radius:20px;background:var(--soft);font-weight:600}
    .pill{background:var(--white);border:1px solid var(--border)}

    /* Hero */
    .hero{background:linear-gradient(180deg, #e8fff0, #f8fffb);padding:36px 16px 40px;border-bottom:1px solid var(--border)}
    .hero-inner{max-width:1050px;margin:0 auto;text-align:center}
    .hero .crest{width:72px;height:72px;margin:0 auto 10px;border-radius:50%;display:grid;place-items:center;background:radial-gradient}
    .hero h1{margin:6px 0 8px;font-size:32px}
    .hero p{margin:0;color:#0b7a39;font-weight:600}
    .hero small{display:block;margin-top:6px;color:var(--muted)}

    /* Layout */
    .wrapper{max-width:1200px;margin:20px auto;padding:0 16px}
    .main-grid{display:grid;grid-template-columns:1fr 320px;gap:16px}

    /* Cards grid */
    .cards{display:grid;grid-template-columns:repeat(3, 1fr);gap:16px}

    .card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:16px;box-shadow:var(--shadow);display:flex;flex-direction:column;min-height:210px}
    .card-top{display:flex;align-items:center;justify-content:space-between}
    .icon{width:42px;height:42px;border-radius:12px;display:grid;place-items:center;background:#ffeaf0;border:1px solid #ffd0db}
    .heart-btn{border:none;background:#f8fafc;color:#94a3b8;border-radius:999px;width:28px;height:28px;display:grid;place-items:center;cursor:pointer}
    .heart-btn.active{color:#e11d48;background:#ffe4ea}
    .card h3{margin:12px 0 2px;font-size:18px}
    .subtitle{margin:0;color:var(--muted);font-size:13px}
    .big-number{font-size:32px;font-weight:800;margin:10px 0 12px}
    .badges{display:flex;gap:6px;flex-wrap:wrap}
    .badge{font-size:12px;padding:4px 8px;border-radius:999px;background:#eef2ff;border:1px solid #e5e7ff;color:#3730a3}

    .card-actions{margin-top:auto;display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .btn{display:flex;align-items:center;justify-content:center;gap:8px;border:none;border-radius:12px;padding:10px 12px;cursor:pointer;font-weight:700}
    .btn.copy{background:var(--white);border:1px solid var(--border)}
    .btn.call{background:var(--primary);color:#fff}
    .btn.call:disabled{opacity:.6;cursor:not-allowed}
    .btn:hover{filter:brightness(.98)}

    /* History */
    .history{background:var(--white);border:1px solid var(--border);border-radius:var(--radius);padding:14px;box-shadow:var(--shadow);display:flex;flex-direction:column;height:100%}
    .history-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
    .history-title{display:flex;align-items:center;gap:8px;font-weight:800}
    .clear-btn{border:none;background:#eef2ff;border:1px solid #e5e7ff;border-radius:12px;padding:8px 12px;cursor:pointer;font-weight:700}
    .history-list{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:10px;max-height:620px;overflow:auto}
    .history-item{display:flex;align-items:center;justify-content:space-between;padding:10px 10px;border:1px solid var(--border);border-radius:12px}
    .history-item .name{font-weight:700}
    .history-item .sub{color:var(--muted);font-size:12px}

    /* Responsive */
    @media (max-width:1100px){
      .cards{grid-template-columns:repeat(2,1fr)}
    }
    @media (max-width:900px){
      .main-grid{grid-template-columns:1fr}
      .history{order:2}
    }
    @media (max-width:640px){
      .cards{grid-template-columns:1fr}
      .hero h1{font-size:26px}
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <header class="navbar">
    <div class="nav-inner">
      <div class="brand">
        <div class="logo"><img src="../assets/logo.png" alt=""></div>
        <div class="name">
          <span>Emergency Service</span>
          <small>Bangladesh</small>
        </div>
      </div>
      <div class="stats">
        <div class="stat" id="heartStat" title="Total favorites"><span>üíó</span><span id="hearts">0</span></div>
        <div class="stat pill" title="Coins available"><span>ü™ô</span><span id="coins">100</span></div>
        <div class="stat pill" title="Total copies"><span>üìã</span><span id="copies">0</span></div>
      </div>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero">
    <div class="hero-inner">
      <div class="crest"><img src="../assets/logo (1).png" alt=""></div>
      <h1>Emergency Service Directory</h1>
      <p>Government Emergency Services at Your Fingertip - A project by Government of the People's Republic of Bangladesh</p>
      <small></small>
    </div>
  </section>

  <!-- Main -->
  <div class="wrapper">
    <div class="main-grid">
      <div class="cards" id="cards"></div>

      <!-- History Section -->
      <aside class="history">
        <div class="history-head">
          <div class="history-title"><span>üïò</span><span>Call History</span></div>
          <button class="clear-btn" id="clearHistory">Clear</button>
        </div>
        <ul class="history-list" id="historyList"></ul>
      </aside>
    </div>
  </div>

  <script>
    // ------- Data -------
    const services = [
      { id:'nat', name:'National Emergency Number', nameBn:'National Emergency', number:'999', category:'All', emoji:'üö®' },
      { id:'pol', name:'Police Helpline Number', nameBn:'Police', number:'999', category:'Police', emoji:'üëÆ‚Äç‚ôÇÔ∏è' },
      { id:'fire', name:'Fire Service Number', nameBn:'Fire Service', number:'999', category:'Fire', emoji:'üöí' },
      { id:'amb', name:'Ambulance Service', nameBn:'Ambulance', number:'1994-999999', category:'Health', emoji:'üöë' },
      { id:'women', name:'Women & Child Helpline', nameBn:'Women & Child Helpline', number:'109', category:'Help', emoji:'üë©‚Äçüëß' },
      { id:'anti', name:'Anti-Corruption Helpline', nameBn:'Anti-Corruption', number:'106', category:'Govt.', emoji:'üèõÔ∏è' },
      { id:'elec', name:'Electricity Helpline', nameBn:'Electricity Outage', number:'16216', category:'Electricity', emoji:'üí°' },
      { id:'brac', name:'Brac Helpline', nameBn:'Brac', number:'16445', category:'NGO', emoji:'ü§ù' },
      { id:'rail', name:'Bangladesh Railway Helpline', nameBn:'Bangladesh Railway', number:'163', category:'Travel', emoji:'üöÜ' }
    ];

    // ------- State -------
    let heartCount = 0;
    let copyCount = 0;
    let coins = 100;
    const history = [];

    // ------- Helpers -------
    const $ = sel => document.querySelector(sel);
    const $$ = sel => document.querySelectorAll(sel);

    function updateNavbar(){
      $('#hearts').textContent = heartCount;
      $('#coins').textContent = coins;
      $('#copies').textContent = copyCount;
    }

    function timeNow(){
      const d = new Date();
      const hh = String(d.getHours()).padStart(2,'0');
      const mm = String(d.getMinutes()).padStart(2,'0');
      const ss = String(d.getSeconds()).padStart(2,'0');
      return `${hh}:${mm}:${ss}`;
    }

    function addHistoryItem(service){
      const when = timeNow();
      history.push({name: service.name, number: service.number, time: when});
      const li = document.createElement('li');
      li.className = 'history-item';
      li.innerHTML = `<div><div class="name">${service.name}</div><div class="sub">${service.number}</div></div><div class="sub">${when}</div>`;
      $('#historyList').prepend(li);
    }

    function copyText(text){
      if (navigator.clipboard && navigator.clipboard.writeText) {
        return navigator.clipboard.writeText(text);
      } else {
        // Fallback
        const ta = document.createElement('textarea');
        ta.value = text; document.body.appendChild(ta); ta.select();
        try{ document.execCommand('copy'); }catch(e){}
        document.body.removeChild(ta);
        return Promise.resolve();
      }
    }

    // ------- Render Cards -------
    function renderCards(){
      const wrap = $('#cards');
      wrap.innerHTML = '';
      services.slice(0,9).forEach(s => {
        const card = document.createElement('article');
        card.className = 'card';
        card.dataset.id = s.id;
        card.innerHTML = `
          <div class="card-top">
            <div class="icon" aria-hidden="true">${s.emoji}</div>
            <button class="heart-btn" aria-label="Add to favorites" title="Add to favorites">‚ù§</button>
          </div>
          <h3>${s.name}</h3>
          <p class="subtitle">${s.nameBn}</p>
          <div class="big-number">${s.number}</div>
          <div class="badges"><span class="badge">${s.category}</span></div>
          <div class="card-actions">
            <button class="btn copy" data-action="copy"><span>üìã</span><span>Copy</span></button>
            <button class="btn call" data-action="call"><span>üìû</span><span>Call</span></button>
          </div>
        `;
        wrap.appendChild(card);
      });
    }

    // ------- Event Delegation -------
    function wireEvents(){
      // Heart/Favorite
      $('#cards').addEventListener('click', (e)=>{
        const heart = e.target.closest('.heart-btn');
        if(heart){
          if(!heart.classList.contains('active')){
            heart.classList.add('active');
            heartCount += 1; updateNavbar();
          }
          return;
        }
        const btn = e.target.closest('.btn');
        if(!btn) return;
        const card = e.target.closest('.card');
        const id = card.dataset.id;
        const service = services.find(x=>x.id===id);
        if(btn.dataset.action==='copy'){
          copyText(service.number).then(()=>{
            copyCount += 1; updateNavbar();
            alert(`Number copied: ${service.name} ‚Äî ${service.number}`);
          });
        }
        if(btn.dataset.action==='call'){
          if(coins < 20){
            alert('Not enough coins to make a call. You need 20 coins.');
            return;
          }
          alert(`Calling ${service.name} at ${service.number}...`);
          coins -= 20; updateNavbar();
          addHistoryItem(service);
        }
      });

      // Clear History
      $('#clearHistory').addEventListener('click', ()=>{
        history.length = 0;
        $('#historyList').innerHTML = '';
      });
    }

    // ------- Init -------
    renderCards();
    wireEvents();
    updateNavbar();
  </script>
</body>
</html>
